# NevatripTest
Выполнение каждого задания находятся в отдельном каталогах. Какой каталог содержит то или иное задание описано ниже.

## Первое задание - Адаптивная верстка блока
Решение данной задачи находится в каталоге **nevatrip-block**, который содержит клиентское next-приложение, основная часть компонента вынесена в подкаталог components/PlaceCard.js, стили и медиа-запросы для адаптации находятся в styles/components/PlaceCard.module.scss.К сожалению, из-за некоторых некорректностей в макете (разная ширина или оформление одних и тех же блоков) следовать ему полностью не получилось.
Для запуска приложения необходимо выполнить следующие команды:
```
yarn install
yarn dev
```
Для решения данной части задания использовались следующие инструменты: фреймворк Next.js + библиотека React(JS) + препроцессор SASS в синтаксисе SCSS. Медиа-запросами педусмотрена адаптивность для размеров от < 420px и до > 1920px.

## Второе задание - Адаптивность таблицы
Решение задачи находится в каталоге **table-task**.
Данный пункт, на мой взгляд, не имеет единственного правильного решения, к тому же из-за того, что таблица содержит не "осознанные" данные, сложно проверить насколько разные способы сохраняют ее целостность и читабельность, поэтому в данном задании я привела два варианта решения, которые можно применить в данной ситуации. Исходный html-файл не был никак изменен, кроме дубляжа таблицы и добавления контейнера для каждой из них. Основная работа затронула файл styles.css, все правки находятся в конце в файла после комментария /* Fixes */.

## Третье задание - Модификация таблицы БД для хранения заказов
Данный пункт задания выполнялся в программе pgModeler. Для удобства общая таблица была разделена на несколько более мелких, но помогающих сохранить читаемость данных, а именно:
- **events** - хранит в себе данные о мероприятиях (id-события и его дату);
- **ticket_types** - хранит данные о типах билетов (детские, взрослые, льготные и групповые), что создано для решения первой части задания. Данная таблица также состоит из двух параметров - id и название категории;
- **events_ticket_types_price** - относится к связующим таблицам между таблицами events и ticket_types, а также содержит параметр price, так как цена зависит от типа билета и события, на которое этот билет приобретается;
- **tickets** - таблица, описывающая сущность 1 билета, ссылается на таблицу, описанную в пункте 3, но также содержит в себе новый параметр - barcode, так как он должен быть уникальным для каждого билета, а не для заказа (по заданию 2), данный параметр было решено вынести именно в эту таблицу;
- **orders** - таблица с данными о заказах, содержит в себе id и дату оформления заказа.

Как можно заметить, таблицы не содержат в себе отдельных полей с общей стоимостью заказа и количеством отдельных билетов в заказе по следующим причинам:
- Количество билетов в заказе можно вычислить по записям tickets, так как она ссылается на таблицу orders;
- Итоговую сумму заказа можно вычислить, взяв количество билетов в заказе и умножив на стоимость данного билета (исходя из категории и события по таблице events_ticket_types_price.

![This is an schema](/orders-table/db.jpg)

## Четвертое задание - Страница подбора поездок
Решение задания в каталоге **tickets-store**.
Для данной задачи также было создано next-приложение с теми же инструментами - React(JS) + SASS(SCSS).
Данные для задачи хранятся в подкаталоге common/data.js.
Основная логика и верстка находится в файле pages/index.js и содержит в себе следующие основные функции:
- **getDate()** - функция, преобразующая строку со временем, например, "19:00", в текущую дату с таким временем. Она необходима для дальнейшего корректного времени;
- **getFinishTime()** - функция для получения времени окончания поездки;
- **getResult()** - функция, созвращающая данные о заказе (время начала и окончания, его продолжительность, стоимость и количество билетов);
- **getDuration()** - функция высчитывает продолжительность поездки в минутах;
- **filterTime()** - используется при выводе времени при направление туда и обратно, для того, чтобы время первой поездки не пересекалось со временем второй;
- **changeDiraction()** - вызывается при смене направления для того, чтобы очистить значения остальных полей;
- **toLocalTime()** - переводит значения времени из файла common/data.js в локальное время пользователя.

Для запуска проекта необходимо также выполнить команды:
```
yarn install
yarn dev
```
В данном разделе не была предусмотрена адаптивность под различные устройства, так как это не являлось целью этого задания.
Также стоит отметить, что в этой части использовалась библиотека react-select для отображения select-компонентов.
### Спасибо за внимание! Надеюсь на скорый ответ :)
